Math=Math||{};Math.detXY=Math.detXY||function(a,b,c,d){return a*d-b*c};Math.dotXY=Math.dotXY||function(a,b){return a.x*b.x+a.y*b.y};Math.lengthXY=Math.lengthXY||function(a){return Math.sqrt(Math.dotXY(a,a))};Math.distXY=Math.distXY||function(a,b){return Math.lengthXY({x:b.x-a.x,y:b.y-a.y})};Math.unitXY=Math.unitXY||function(a){var b=Math.lengthXY(a);if(b==0)b=1;return{x:a.x/b,y:a.y/b}}; Math.areParallelXY=Math.areParallelXY||function(a,b){var c=Math.unitXY(a),d=Math.unitXY(b);return Math.abs(Math.detXY(c.x,c.y,d.x,d.y))<0.5};Math.inRange=Math.inRange||function(a,b,c){return c>a&&c<b}; Math.liesInXY=Math.liesInXY||function(a,b,c,d){var e=Math.min(a.x,b.x),f=Math.max(a.x,b.x),g=Math.min(c.x,d.x),h=Math.max(c.x,d.x);if(Math.inRange(e,f,g)||Math.inRange(e,f,h)||Math.inRange(g,h,e)||Math.inRange(g,h,f))return true;e=Math.min(a.y,b.y);a=Math.max(a.y,b.y);b=Math.min(c.y,d.y);c=Math.max(c.y,d.y);if(Math.inRange(e,a,b)||Math.inRange(e,a,c)||Math.inRange(b,c,e)||Math.inRange(b,c,a))return true;return false}; Math.rotateXY=Math.rotateXY||function(a,b,c){var d=a.x-b.x;a=a.y-b.y;var e=Math.cos(c);c=Math.sin(c);return{x:b.x+(d*e+a*c),y:b.y+(-d*c+a*e)}};Math.translateXY=Math.translateXY||function(a,b){return{x:a.x+b.x,y:a.y+b.y}};